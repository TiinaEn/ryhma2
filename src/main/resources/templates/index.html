<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" type="text/css" href="tyyli.css">
    <meta charset="UTF-8"/>
    <title>Title</title>
    <script>
        function toggleReplyVisibility(event) {
            var stopsToggle = event.target.firstElementChild;
            if (stopsToggle.style.display === "none") {
                stopsToggle.style.display = "block";
            } else {
                stopsToggle.style.display = "none";
            }
        }
    </script>

</head>
<body>
<div class="banner">
    <img src="banneri.png" alt="Banneri" align="center" width="100%">
</div>

<div class="content">
    <div class="navi"><ul>
        <li><a href="/">Keskustelupalsta</a></li>
        <li><a href="/login">login</a></li>
        <li><a href="/rekisterointi">rekisteröinti</a></li>
        <li><a href="/profiili">profiili</a></li>
        <li><a href="/logout">Ulos!</a></li>
    </ul></div>
</div>
    <div class="content">
<div style="width: 100%">

    <table style="width: 100%; border: solid black">
        <tr style="border: solid black"><th>Ajanhetki</th><th>Käyttäjä</th><th>Viesti</th></tr>
        <tr th:each="viesti: ${viestit}" style="height: 15px;">

            <form action="#" th:action="@{/reply}" th:object="${lisattava}" method="post">
                <td th:text="${viesti.aikaleima}"></td><td th:text="${viesti.kayttaja.nimimerkki}"></td><td style="display:none" th:text="${viesti.id}"></td><td th:text="${viesti.teksti}" style="width: 70%">
                <td><div onclick="toggleReplyVisibility(event)">Vastaa
                <div class="vastauslaatikko">
                    <input th:field="*{kayttaja.nimimerkki}"/>
                    <input th:field="*{teksti}" />
                    <input th:type="submit" value="Lähetä"/>
                </div></div>
            </td>

            </form>
            <form action="#" th:action="@{/poista}" method="post">
                <input th:type="hidden" th:name="kayttaja.nimimerkki" th:value="${viesti.kayttaja.nimimerkki}"/>
                <input th:type="hidden" th:name="id" th:value="${viesti.id}"/>
                <td th:if="${admin == 1}==true"><div><input th:type="submit" value="Poista"/></div></td>
            </form>
        </tr>
    </table>

</div>
    <br/>
        <hr>
<div>Haluatko osallistua keskusteluun? Iske itsesi sisään foorumeillemme!</div>
        <hr>
    <br/>
<div id="divi2">
    <form action="#" th:action="@{/lisaaviesti}" th:object="${lisattava}" method="post">
        <div><input th:type="hidden" th:field="*{kayttaja.nimimerkki}"/></div>
        <div>Viesti:<br/> <input th:field="*{teksti}"/></div>
        <div><input th:type="submit" value="Viestitä"/></div>
    </form>
</div>
</div>
</body>
</html>